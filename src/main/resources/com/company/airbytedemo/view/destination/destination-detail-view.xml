<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://destinationDetailView.title"
      focusComponent="form">
    <data>
        <instance id="destinationDc"
                  class="com.company.airbytedemo.entity.Destination">
            <fetchPlan extends="_base"/>
            <loader id="destinationDl"/>
        </instance>
        <instance id="destinationS3DTODc" class="com.company.airbytedemo.dto.DestinationS3DTO">
        </instance>
        <instance id="destinationS3CSVDc" class="com.company.airbytedemo.dto.DestinationS3CSVCommaSeparatedValuesDTO">
        </instance>
        <instance id="destinationS3JsonDc"
                  class="com.company.airbytedemo.dto.DestinationS3JSONLinesNewlineDelimitedJSONDTO">
        </instance>
        <instance id="destinationS3ArvoDc" class="com.company.airbytedemo.dto.DestinationS3AvroApacheAvroDTO">
        </instance>
        <instance id="destinationS3ParquetDc"
                  class="com.company.airbytedemo.dto.DestinationS3ParquetColumnarStorageDTO">
        </instance>

    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <actions>
        <action id="saveAction" type="detail_saveClose"/>
        <action id="closeAction" type="detail_close"/>
    </actions>
    <layout>
        <formLayout id="form" dataContainer="destinationDc">
            <responsiveSteps>
                <responsiveStep minWidth="0" columns="1"/>
                <responsiveStep minWidth="40em" columns="2"/>
            </responsiveSteps>
            <textField id="nameField" property="name"/>
            <textField id="accessKeyIdField"
                       dataContainer="destinationS3DTODc"
                       property="accessKeyId"
                       label="Access Key ID"/>

            <passwordField id="secretAccessKeyField"
                           dataContainer="destinationS3DTODc"
                           property="secretAccessKey"
                           label="Secret Access Key"/>

            <textField id="s3BucketNameField"
                       dataContainer="destinationS3DTODc"
                       property="s3BucketName"
                       label="S3 Bucket Name"
                       required="true"
                       requiredMessage="Bucket name is required"/>

            <textField id="s3BucketPathField"
                       dataContainer="destinationS3DTODc"
                       property="s3BucketPath"
                       label="S3 Bucket Path"/>

            <!-- Enum: DestinationS3S3BucketRegion -->
            <comboBox id="s3BucketRegionField"
                      dataContainer="destinationS3DTODc"
                      property="s3BucketRegion"
                      label="S3 Bucket Region"
                      required="true"
                      requiredMessage="Region is required"/>

            <!-- Enum: DestinationS3OutputFormat -->
            <comboBox id="s3OutputFormatField"
                      dataContainer="destinationS3DTODc"
                      property="format"
                      label="Output Format"/>

            <textField id="roleArnField"
                       dataContainer="destinationS3DTODc"
                       property="roleArn"
                       label="Role ARN"/>

            <textField id="s3EndpointField"
                       dataContainer="destinationS3DTODc"
                       property="s3Endpoint"
                       label="S3 Endpoint"/>

            <textField id="s3PathFormatField"
                       dataContainer="destinationS3DTODc"
                       property="s3PathFormat"
                       label="S3 Path Format"/>

            <textField id="fileNamePatternField"
                       dataContainer="destinationS3DTODc"
                       property="fileNamePattern"
                       label="File Name Pattern"/>
        </formLayout>
        <vbox>
            <tabSheet id="formatTabSheet" width="100%">
                <!-- CSV -->
                <tab id="csvTab" label="Cấu hình CSV: Comma-Separated Values">
                    <vbox>
                        <formLayout id="csvForm" dataContainer="destinationS3CSVDc">
                            <comboBox id="csvCompressionField" property="compression" label="Compression"/>
                            <comboBox id="csvFlatteningField" property="flattening" label="Flattening"/>
                            <comboBox id="csvFormatTypeField" property="formatType" label="Format Type"/>
                        </formLayout>
                    </vbox>
                </tab>

                <!-- JSONL -->
                <tab id="jsonTab" label="Cấu hình JSON Lines: Newline-delimited JSON">
                    <vbox>
                        <formLayout id="jsonForm" dataContainer="destinationS3JsonDc">
                            <comboBox id="jsonCompressionField" property="compression" label="Compression"
                            />
                            <comboBox id="jsonFlatteningField" property="flattening" label="Flattening"
                            />
                            <comboBox id="jsonFormatTypeField" property="formatType" label="Format Type"
                            />
                        </formLayout>
                    </vbox>
                </tab>

                <!-- AVRO -->
                <tab id="arvoTab" label="Cấu hình Avro: Apache Avro">
                    <vbox>
                        <formLayout id="arvoForm" dataContainer="destinationS3ArvoDc">
                            <comboBox id="avroCodecField" property="codec" label="Codec"
                            />
                        </formLayout>
                    </vbox>
                </tab>

                <!-- PARQUET -->
                <tab id="parquetTab" label="Cấu hình Parquet: Columnar Storage">
                    <vbox>
                        <formLayout id="parquetForm" dataContainer="destinationS3ParquetDc">
                            <numberField id="pqBlockSizeMbField" property="blockSizeMb" label="Block Size (MB)"/>
                            <comboBox id="pqCompressionCodecField" property="compressionCodec" label="Compression Codec"
                            />
                            <numberField id="pqDictionaryPageSizeKbField" property="dictionaryPageSizeKb"
                                         label="Dictionary Page Size (KB)"/>
                            <textField id="pqFormatTypeField" property="formatType" label="Format Type"/>
                            <numberField id="pqMaxPaddingSizeMbField" property="maxPaddingSizeMb"
                                         label="Max Padding Size (MB)"/>
                            <numberField id="pqPageSizeKbField" property="pageSizeKb" label="Page Size (KB)"/>
                        </formLayout>
                    </vbox>
                </tab>
            </tabSheet>
        </vbox>
        <hbox id="detailActions">
            <button id="saveAndCloseButton" action="saveAction"/>
            <button id="closeButton" action="closeAction"/>
        </hbox>

    </layout>
</view>